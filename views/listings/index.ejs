<% layout("/layouts/boilerplate") %>


    <div class="toggle ms-auto">
        <div class="form-check form-switch">
            <label class="form-check-label" for="switchCheckDefault">Display taxes</label>
            <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
        </div>
    </div>
</div>

<div class="card-grid">
    <% for (let list of data) { %>
    <a href="/listing/<%= list._id %>" class="card">
        <img src="<%= list.image.url %>" class="card-img-top" alt="<%= list.title %>">
        <div class="card-body">
            <h5 class="card-title"><%= list.title %></h5>
            <p class="card-text"><%= list.location %></p>
            <p class="card-price">
                â‚¹ <%= (typeof list.price === "number" ? list.price : 0).toLocaleString("en-IN") %>
                <i class="tax-info">+18% GST</i>
            </p>
        </div>
    </a>
    <% } %>
</div>

<script>
    let priceToggle = document.getElementById("switchCheckDefault");
    let taxInfo = document.querySelectorAll(".tax-info");
    
    priceToggle.addEventListener("click", function() {
        if (priceToggle.checked) {
            taxInfo.forEach(function(info) {
                info.style.display = "inline";
            });
        } else {
            taxInfo.forEach(function(info) {
                info.style.display = "none";
            });
        }
    });

    // Optional: Add a subtle active state to filters
    const filters = document.querySelectorAll('.filter');
    filters.forEach(filter => {
        filter.addEventListener('click', () => {
            filters.forEach(f => f.classList.remove('active'));
            filter.classList.add('active');
        });
    });
</script>